-# Outer Container: Sticky, White, Sharp Black Border Bottom
%header{class: "bg-white border-b border-neutral-900 z-50 #{sticky ? 'sticky top-0' : ''}", data: { controller: "mobile-menu" }}
  .max-w-7xl.mx-auto.px-4.sm:px-6.lg:px-8
    .flex.justify-between.items-center.h-20

      -# --- LEFT: LOGO ---
      .flex.items-center
        = link_to root_path, class: "group flex items-center gap-2" do
          -# Typography Logo: Heavy weight, tight tracking to contrast the wide navigation
          %span.text-xl.font-black.tracking-tighter.text-neutral-900.uppercase.group-hover:text-neutral-600.transition-colors
            = app_name

      -# --- CENTER/RIGHT: DESKTOP ---
      .hidden.md:flex.items-center.gap-8
        - if user
          %nav.flex.gap-6.items-center
            = render Ui::NavLinkComponent.new(label: t(".courses"), href: "#")
            = render Ui::NavLinkComponent.new(label: t(".profile"), href: "#")

          - if user.teacher?
            = render Ui::NavLinkComponent.new(label: t(".instructor_dashboard"), href: teach_dashboard_path)

          -# Minimalist vertical divider
          .h-5.w-px.bg-neutral-200

          .flex.gap-4.items-center
            = render Ui::ButtonComponent.new(label: t(".sign_out"), href: destroy_user_session_path, method: :delete, scheme: :danger)

        - else
          %nav.flex.gap-6.items-center
            = render Ui::NavLinkComponent.new(label: t(".sign_in"), href: new_user_session_path)
            = render Ui::ButtonComponent.new(label: t(".sign_up"), href: new_user_registration_path)

        -# Locale Selector (Assuming you have a partial)
        .pl-4.border-l.border-neutral-200
          = render "shared/locale_selector" rescue nil

      -# --- RIGHT: MOBILE HAMBURGER ---
      .md:hidden
        %button.p-2.text-neutral-900.hover:bg-neutral-100.transition-colors{"aria-label" => "Open menu", "data-action" => "click->mobile-menu#toggle"}
          -# Using a thinner stroke width (1.5) for a cleaner look
          = lucide_icon("menu", class: "h-6 w-6 stroke-[1.5]")

  -# --- MOBILE MENU DRAWER ---
  .hidden.bg-white.border-b.border-neutral-900.md:hidden{"data-mobile-menu-target" => "menu"}
    .px-4.pt-2.pb-6
      -# Mobile Locale Selector
      .py-3.border-b.border-neutral-100.mb-2
        = render "shared/mobile_locale_selector" rescue nil

      - if user
        = render Ui::NavLinkComponent.new(label: t(".courses"), href: "#", mobile: true)
        = render Ui::NavLinkComponent.new(label: t(".profile"), href: "#", mobile: true)
        - if user.teacher?
          = render Ui::NavLinkComponent.new(label: t(".instructor_dashboard"), href: teach_dashboard_path, mobile: true)
        .pt-6
          = render Ui::ButtonComponent.new(label: t(".sign_out"), href: destroy_user_session_path, method: :delete, mobile: true, scheme: :danger)
      - else
        = render Ui::NavLinkComponent.new(label: t(".sign_in"), href: new_user_session_path, mobile: true)
        .pt-6
          = render Ui::ButtonComponent.new(label: t(".sign_up"), href: new_user_registration_path, mobile: true)
