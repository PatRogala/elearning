-# --- STICKY ACTION BAR ---
.sticky.z-40.bg-white.border-b.border-neutral-900.top-20
  .max-w-7xl.mx-auto.px-4.sm:px-6.lg:px-8
    .h-20.flex.items-center.justify-between
      -# Back Link
      = link_to teach_dashboard_path, class: "inline-flex items-center text-xs font-bold uppercase text-neutral-500 hover:text-neutral-900 transition-colors tracking-[0.15em]" do
        %svg.w-4.h-4.mr-2{fill: "none", stroke: "currentColor", "stroke-width" => "2", viewBox: "0 0 24 24"}
          %path{d: "M19 12H5M12 19l-7-7 7-7"}
        = t(".dashboard")

      -# Primary Actions
      .flex.items-center.gap-4
        -# Save Button
        %button.inline-flex.items-center.bg-white.text-neutral-900.px-6.py-3.text-xs.font-bold.uppercase.hover:bg-neutral-50.transition-colors.border.border-neutral-200{type: "submit", form: "course-edit-form", class: "tracking-[0.15em]"}
          = t(".save_changes")

        -# Publish Button (High Contrast)
        = button_to publish_teach_course_path(@form.model), method: :patch, class: "inline-flex items-center bg-neutral-900 text-white px-6 py-3 text-xs font-bold uppercase hover:bg-neutral-700 transition-colors border border-neutral-900 tracking-[0.15em]" do
          = t(".publish_course")
          %svg.w-4.h-4.ml-2{fill: "none", stroke: "currentColor", "stroke-width" => "2", viewBox: "0 0 24 24"}
            %path{d: "M5 12h14M12 5l7 7-7 7"}

-# --- MAIN FORM CONTAINER ---
.max-w-7xl.mx-auto.px-4.sm:px-6.lg:px-8.py-12
  = form_with(model: @form, url: teach_course_path(@form.model), id: "course-edit-form", class: "grid grid-cols-1 lg:grid-cols-12 gap-12") do |f|
    -# --- LEFT COLUMN (CONTENT) - Spans 8 cols ---
    .lg:col-span-8.space-y-12

      -# 1. Title Section (Document Style)
      .space-y-6
        .group
          = f.label :title, class: "block text-xs font-bold uppercase text-neutral-500 mb-2 tracking-[0.15em]"
          = f.text_field :title, class: "block w-full bg-transparent text-4xl md:text-5xl font-black text-neutral-900 tracking-tight border-b-2 border-neutral-200 focus:border-neutral-900 focus:outline-none placeholder-neutral-300 py-2 transition-colors rounded-none tracking-[0.15em]"

      -# 2. Description (Rich Text Simulator)
      .space-y-4
        = f.label :description, class: "block text-xs font-bold uppercase text-neutral-500 mb-2 tracking-[0.15em]"
        = f.rich_text_area :description

    -# --- RIGHT COLUMN (SIDEBAR / SETTINGS) - Spans 4 cols ---
    .lg:col-span-4.space-y-10

      -# 1. Course Cover Image
      .space-y-4
        = f.label :image, class: "block text-xs font-bold uppercase text-neutral-900 tracking-[0.15em]"

        .relative.group.bg-neutral-100.border.border-neutral-300.overflow-hidden{class: "aspect-[16/9]", "data-controller" => "image-preview"}
          -# File Input (Hidden)
          = f.file_field :image, class: "hidden", data: { "image-preview-target" => "input", action: "change->image-preview#preview" }, accept: "image/*"

          -# Preview Image
          = image_tag image_cover, class: "object-cover w-full h-full", data: { "image-preview-target" => "preview" }, alt: "#{form.model.title}"

          -# Upload Overlay (Hidden by default, visible on hover)
          .absolute.inset-0.flex.items-center.justify-center.opacity-0.group-hover:opacity-100.transition-opacity{class: "bg-black/50"}
            %button.px-4.py-2.bg-white.text-neutral-900.text-xs.font-bold.uppercase.tracking-widest.cursor-pointer{type: "button", data: { action: "click->image-preview#trigger" }}
              = t(".replace_image")

        %p.text-neutral-500.uppercase.tracking-wide{class: "text-[10px]"}
          = t(".recommended_size")

      -# 3. Course Details
      .space-y-6
        -# Price
        .space-y-2
          = f.label :price, class: "block text-xs font-bold uppercase text-neutral-900 tracking-[0.15em]"
          .relative
            %span.absolute.left-4.text-neutral-500.font-serif.italic{class: "top-1/2 -translate-y-1/2"} PLN
            = f.number_field :price, class: "block w-full bg-white border border-neutral-300 text-neutral-900 text-sm font-bold py-3 pl-14 pr-4 focus:border-neutral-900 focus:ring-1 focus:ring-neutral-900 focus:outline-none rounded-none", placeholder: "49.99", step: "0.01", min: "0.00"
